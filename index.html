<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/logo.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/logo.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta property="og:type" content="website">
<meta property="og:title" content="dawn_buji&#39;s Blog">
<meta property="og:url" content="https://github.com/dawnbuji/dawnbuji.github.io/index.html">
<meta property="og:site_name" content="dawn_buji&#39;s Blog">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="dawn_buji&#39;s Blog">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://github.com/dawnbuji/dawnbuji.github.io/"/>






  <title>dawn_buji's Blog</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">dawn_buji's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">一蓑烟雨任平生</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://github.com/dawnbuji/dawnbuji.github.io/2020/07/25/KEY/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="dawn_buji">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="dawn_buji's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/07/25/KEY/" itemprop="url">未命名</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-07-25T16:37:29+08:00">
                2020-07-25
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <!doctype html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
<meta charset="UTF-8"><meta name="viewport" content="width=device-width initial-scale=1">
<title>KEY</title><link href="https://fonts.loli.net/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext" rel="stylesheet" type="text/css"><style type="text/css">html {overflow-x: initial !important;}:root { --bg-color:#ffffff; --text-color:#333333; --select-text-bg-color:#B5D6FC; --select-text-font-color:auto; --monospace:"Lucida Console",Consolas,"Courier",monospace; }
html { font-size: 14px; background-color: var(--bg-color); color: var(--text-color); font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; -webkit-font-smoothing: antialiased; }
body { margin: 0px; padding: 0px; height: auto; bottom: 0px; top: 0px; left: 0px; right: 0px; font-size: 1rem; line-height: 1.42857; overflow-x: hidden; background: inherit; tab-size: 4; }
iframe { margin: auto; }
a.url { word-break: break-all; }
a:active, a:hover { outline: 0px; }
.in-text-selection, ::selection { text-shadow: none; background: var(--select-text-bg-color); color: var(--select-text-font-color); }
#write { margin: 0px auto; height: auto; width: inherit; word-break: normal; overflow-wrap: break-word; position: relative; white-space: normal; overflow-x: visible; padding-top: 40px; }
#write.first-line-indent p { text-indent: 2em; }
#write.first-line-indent li p, #write.first-line-indent p * { text-indent: 0px; }
#write.first-line-indent li { margin-left: 2em; }
.for-image #write { padding-left: 8px; padding-right: 8px; }
body.typora-export { padding-left: 30px; padding-right: 30px; }
.typora-export .footnote-line, .typora-export li, .typora-export p { white-space: pre-wrap; }
@media screen and (max-width: 500px) {
  body.typora-export { padding-left: 0px; padding-right: 0px; }
  #write { padding-left: 20px; padding-right: 20px; }
  .CodeMirror-sizer { margin-left: 0px !important; }
  .CodeMirror-gutters { display: none !important; }
}
#write li > figure:last-child { margin-bottom: 0.5rem; }
#write ol, #write ul { position: relative; }
img { max-width: 100%; vertical-align: middle; image-orientation: from-image; }
button, input, select, textarea { color: inherit; font: inherit; }
input[type="checkbox"], input[type="radio"] { line-height: normal; padding: 0px; }
*, ::after, ::before { box-sizing: border-box; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p, #write pre { width: inherit; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p { position: relative; }
p { line-height: inherit; }
h1, h2, h3, h4, h5, h6 { break-after: avoid-page; break-inside: avoid; orphans: 4; }
p { orphans: 4; }
h1 { font-size: 2rem; }
h2 { font-size: 1.8rem; }
h3 { font-size: 1.6rem; }
h4 { font-size: 1.4rem; }
h5 { font-size: 1.2rem; }
h6 { font-size: 1rem; }
.md-math-block, .md-rawblock, h1, h2, h3, h4, h5, h6, p { margin-top: 1rem; margin-bottom: 1rem; }
.hidden { display: none; }
.md-blockmeta { color: rgb(204, 204, 204); font-weight: 700; font-style: italic; }
a { cursor: pointer; }
sup.md-footnote { padding: 2px 4px; background-color: rgba(238, 238, 238, 0.7); color: rgb(85, 85, 85); border-radius: 4px; cursor: pointer; }
sup.md-footnote a, sup.md-footnote a:hover { color: inherit; text-transform: inherit; text-decoration: inherit; }
#write input[type="checkbox"] { cursor: pointer; width: inherit; height: inherit; }
figure { overflow-x: auto; margin: 1.2em 0px; max-width: calc(100% + 16px); padding: 0px; }
figure > table { margin: 0px; }
tr { break-inside: avoid; break-after: auto; }
thead { display: table-header-group; }
table { border-collapse: collapse; border-spacing: 0px; width: 100%; overflow: auto; break-inside: auto; text-align: left; }
table.md-table td { min-width: 32px; }
.CodeMirror-gutters { border-right: 0px; background-color: inherit; }
.CodeMirror-linenumber { user-select: none; }
.CodeMirror { text-align: left; }
.CodeMirror-placeholder { opacity: 0.3; }
.CodeMirror pre { padding: 0px 4px; }
.CodeMirror-lines { padding: 0px; }
div.hr:focus { cursor: none; }
#write pre { white-space: pre-wrap; }
#write.fences-no-line-wrapping pre { white-space: pre; }
#write pre.ty-contain-cm { white-space: normal; }
.CodeMirror-gutters { margin-right: 4px; }
.md-fences { font-size: 0.9rem; display: block; break-inside: avoid; text-align: left; overflow: visible; white-space: pre; background: inherit; position: relative !important; }
.md-diagram-panel { width: 100%; margin-top: 10px; text-align: center; padding-top: 0px; padding-bottom: 8px; overflow-x: auto; }
#write .md-fences.mock-cm { white-space: pre-wrap; }
.md-fences.md-fences-with-lineno { padding-left: 0px; }
#write.fences-no-line-wrapping .md-fences.mock-cm { white-space: pre; overflow-x: auto; }
.md-fences.mock-cm.md-fences-with-lineno { padding-left: 8px; }
.CodeMirror-line, twitterwidget { break-inside: avoid; }
.footnotes { opacity: 0.8; font-size: 0.9rem; margin-top: 1em; margin-bottom: 1em; }
.footnotes + .footnotes { margin-top: 0px; }
.md-reset { margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: top; background: 0px 0px; text-decoration: none; text-shadow: none; float: none; position: static; width: auto; height: auto; white-space: nowrap; cursor: inherit; -webkit-tap-highlight-color: transparent; line-height: normal; font-weight: 400; text-align: left; box-sizing: content-box; direction: ltr; }
li div { padding-top: 0px; }
blockquote { margin: 1rem 0px; }
li .mathjax-block, li p { margin: 0.5rem 0px; }
li { margin: 0px; position: relative; }
blockquote > :last-child { margin-bottom: 0px; }
blockquote > :first-child, li > :first-child { margin-top: 0px; }
.footnotes-area { color: rgb(136, 136, 136); margin-top: 0.714rem; padding-bottom: 0.143rem; white-space: normal; }
#write .footnote-line { white-space: pre-wrap; }
@media print {
  body, html { border: 1px solid transparent; height: 99%; break-after: avoid; break-before: avoid; font-variant-ligatures: no-common-ligatures; }
  #write { margin-top: 0px; padding-top: 0px; border-color: transparent !important; }
  .typora-export * { -webkit-print-color-adjust: exact; }
  html.blink-to-pdf { font-size: 13px; }
  .typora-export #write { padding-left: 32px; padding-right: 32px; padding-bottom: 0px; break-after: avoid; }
  .typora-export #write::after { height: 0px; }
  .is-mac table { break-inside: avoid; }
}
.footnote-line { margin-top: 0.714em; font-size: 0.7em; }
a img, img a { cursor: pointer; }
pre.md-meta-block { font-size: 0.8rem; min-height: 0.8rem; white-space: pre-wrap; background: rgb(204, 204, 204); display: block; overflow-x: hidden; }
p > .md-image:only-child:not(.md-img-error) img, p > img:only-child { display: block; margin: auto; }
#write.first-line-indent p > .md-image:only-child:not(.md-img-error) img { left: -2em; position: relative; }
p > .md-image:only-child { display: inline-block; width: 100%; }
#write .MathJax_Display { margin: 0.8em 0px 0px; }
.md-math-block { width: 100%; }
.md-math-block:not(:empty)::after { display: none; }
[contenteditable="true"]:active, [contenteditable="true"]:focus, [contenteditable="false"]:active, [contenteditable="false"]:focus { outline: 0px; box-shadow: none; }
.md-task-list-item { position: relative; list-style-type: none; }
.task-list-item.md-task-list-item { padding-left: 0px; }
.md-task-list-item > input { position: absolute; top: 0px; left: 0px; margin-left: -1.2em; margin-top: calc(1em - 10px); border: none; }
.math { font-size: 1rem; }
.md-toc { min-height: 3.58rem; position: relative; font-size: 0.9rem; border-radius: 10px; }
.md-toc-content { position: relative; margin-left: 0px; }
.md-toc-content::after, .md-toc::after { display: none; }
.md-toc-item { display: block; color: rgb(65, 131, 196); }
.md-toc-item a { text-decoration: none; }
.md-toc-inner:hover { text-decoration: underline; }
.md-toc-inner { display: inline-block; cursor: pointer; }
.md-toc-h1 .md-toc-inner { margin-left: 0px; font-weight: 700; }
.md-toc-h2 .md-toc-inner { margin-left: 2em; }
.md-toc-h3 .md-toc-inner { margin-left: 4em; }
.md-toc-h4 .md-toc-inner { margin-left: 6em; }
.md-toc-h5 .md-toc-inner { margin-left: 8em; }
.md-toc-h6 .md-toc-inner { margin-left: 10em; }
@media screen and (max-width: 48em) {
  .md-toc-h3 .md-toc-inner { margin-left: 3.5em; }
  .md-toc-h4 .md-toc-inner { margin-left: 5em; }
  .md-toc-h5 .md-toc-inner { margin-left: 6.5em; }
  .md-toc-h6 .md-toc-inner { margin-left: 8em; }
}
a.md-toc-inner { font-size: inherit; font-style: inherit; font-weight: inherit; line-height: inherit; }
.footnote-line a:not(.reversefootnote) { color: inherit; }
.md-attr { display: none; }
.md-fn-count::after { content: "."; }
code, pre, samp, tt { font-family: var(--monospace); }
kbd { margin: 0px 0.1em; padding: 0.1em 0.6em; font-size: 0.8em; color: rgb(36, 39, 41); background: rgb(255, 255, 255); border: 1px solid rgb(173, 179, 185); border-radius: 3px; box-shadow: rgba(12, 13, 14, 0.2) 0px 1px 0px, rgb(255, 255, 255) 0px 0px 0px 2px inset; white-space: nowrap; vertical-align: middle; }
.md-comment { color: rgb(162, 127, 3); opacity: 0.8; font-family: var(--monospace); }
code { text-align: left; vertical-align: initial; }
a.md-print-anchor { white-space: pre !important; border-width: initial !important; border-style: none !important; border-color: initial !important; display: inline-block !important; position: absolute !important; width: 1px !important; right: 0px !important; outline: 0px !important; background: 0px 0px !important; text-decoration: initial !important; text-shadow: initial !important; }
.md-inline-math .MathJax_SVG .noError { display: none !important; }
.html-for-mac .inline-math-svg .MathJax_SVG { vertical-align: 0.2px; }
.md-math-block .MathJax_SVG_Display { text-align: center; margin: 0px; position: relative; text-indent: 0px; max-width: none; max-height: none; min-height: 0px; min-width: 100%; width: auto; overflow-y: hidden; display: block !important; }
.MathJax_SVG_Display, .md-inline-math .MathJax_SVG_Display { width: auto; margin: inherit; display: inline-block !important; }
.MathJax_SVG .MJX-monospace { font-family: var(--monospace); }
.MathJax_SVG .MJX-sans-serif { font-family: sans-serif; }
.MathJax_SVG { display: inline; font-style: normal; font-weight: 400; line-height: normal; zoom: 90%; text-indent: 0px; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; padding: 0px; margin: 0px; }
.MathJax_SVG * { transition: none 0s ease 0s; }
.MathJax_SVG_Display svg { vertical-align: middle !important; margin-bottom: 0px !important; margin-top: 0px !important; }
.os-windows.monocolor-emoji .md-emoji { font-family: "Segoe UI Symbol", sans-serif; }
.md-diagram-panel > svg { max-width: 100%; }
[lang="flow"] svg, [lang="mermaid"] svg { max-width: 100%; height: auto; }
[lang="mermaid"] .node text { font-size: 1rem; }
table tr th { border-bottom: 0px; }
video { max-width: 100%; display: block; margin: 0px auto; }
iframe { max-width: 100%; width: 100%; border: none; }
.highlight td, .highlight tr { border: 0px; }
svg[id^="mermaidChart"] { line-height: 1em; }
mark { background: rgb(255, 255, 0); color: rgb(0, 0, 0); }
.md-html-inline .md-plain, .md-html-inline strong, mark .md-inline-math, mark strong { color: inherit; }
mark .md-meta { color: rgb(0, 0, 0); opacity: 0.3 !important; }


.CodeMirror { height: auto; }
.CodeMirror.cm-s-inner { background: inherit; }
.CodeMirror-scroll { overflow: auto hidden; z-index: 3; }
.CodeMirror-gutter-filler, .CodeMirror-scrollbar-filler { background-color: rgb(255, 255, 255); }
.CodeMirror-gutters { border-right: 1px solid rgb(221, 221, 221); background: inherit; white-space: nowrap; }
.CodeMirror-linenumber { padding: 0px 3px 0px 5px; text-align: right; color: rgb(153, 153, 153); }
.cm-s-inner .cm-keyword { color: rgb(119, 0, 136); }
.cm-s-inner .cm-atom, .cm-s-inner.cm-atom { color: rgb(34, 17, 153); }
.cm-s-inner .cm-number { color: rgb(17, 102, 68); }
.cm-s-inner .cm-def { color: rgb(0, 0, 255); }
.cm-s-inner .cm-variable { color: rgb(0, 0, 0); }
.cm-s-inner .cm-variable-2 { color: rgb(0, 85, 170); }
.cm-s-inner .cm-variable-3 { color: rgb(0, 136, 85); }
.cm-s-inner .cm-string { color: rgb(170, 17, 17); }
.cm-s-inner .cm-property { color: rgb(0, 0, 0); }
.cm-s-inner .cm-operator { color: rgb(152, 26, 26); }
.cm-s-inner .cm-comment, .cm-s-inner.cm-comment { color: rgb(170, 85, 0); }
.cm-s-inner .cm-string-2 { color: rgb(255, 85, 0); }
.cm-s-inner .cm-meta { color: rgb(85, 85, 85); }
.cm-s-inner .cm-qualifier { color: rgb(85, 85, 85); }
.cm-s-inner .cm-builtin { color: rgb(51, 0, 170); }
.cm-s-inner .cm-bracket { color: rgb(153, 153, 119); }
.cm-s-inner .cm-tag { color: rgb(17, 119, 0); }
.cm-s-inner .cm-attribute { color: rgb(0, 0, 204); }
.cm-s-inner .cm-header, .cm-s-inner.cm-header { color: rgb(0, 0, 255); }
.cm-s-inner .cm-quote, .cm-s-inner.cm-quote { color: rgb(0, 153, 0); }
.cm-s-inner .cm-hr, .cm-s-inner.cm-hr { color: rgb(153, 153, 153); }
.cm-s-inner .cm-link, .cm-s-inner.cm-link { color: rgb(0, 0, 204); }
.cm-negative { color: rgb(221, 68, 68); }
.cm-positive { color: rgb(34, 153, 34); }
.cm-header, .cm-strong { font-weight: 700; }
.cm-del { text-decoration: line-through; }
.cm-em { font-style: italic; }
.cm-link { text-decoration: underline; }
.cm-error { color: red; }
.cm-invalidchar { color: red; }
.cm-constant { color: rgb(38, 139, 210); }
.cm-defined { color: rgb(181, 137, 0); }
div.CodeMirror span.CodeMirror-matchingbracket { color: rgb(0, 255, 0); }
div.CodeMirror span.CodeMirror-nonmatchingbracket { color: rgb(255, 34, 34); }
.cm-s-inner .CodeMirror-activeline-background { background: inherit; }
.CodeMirror { position: relative; overflow: hidden; }
.CodeMirror-scroll { height: 100%; outline: 0px; position: relative; box-sizing: content-box; background: inherit; }
.CodeMirror-sizer { position: relative; }
.CodeMirror-gutter-filler, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-vscrollbar { position: absolute; z-index: 6; display: none; }
.CodeMirror-vscrollbar { right: 0px; top: 0px; overflow: hidden; }
.CodeMirror-hscrollbar { bottom: 0px; left: 0px; overflow: hidden; }
.CodeMirror-scrollbar-filler { right: 0px; bottom: 0px; }
.CodeMirror-gutter-filler { left: 0px; bottom: 0px; }
.CodeMirror-gutters { position: absolute; left: 0px; top: 0px; padding-bottom: 30px; z-index: 3; }
.CodeMirror-gutter { white-space: normal; height: 100%; box-sizing: content-box; padding-bottom: 30px; margin-bottom: -32px; display: inline-block; }
.CodeMirror-gutter-wrapper { position: absolute; z-index: 4; background: 0px 0px !important; border: none !important; }
.CodeMirror-gutter-background { position: absolute; top: 0px; bottom: 0px; z-index: 4; }
.CodeMirror-gutter-elt { position: absolute; cursor: default; z-index: 4; }
.CodeMirror-lines { cursor: text; }
.CodeMirror pre { border-radius: 0px; border-width: 0px; background: 0px 0px; font-family: inherit; font-size: inherit; margin: 0px; white-space: pre; overflow-wrap: normal; color: inherit; z-index: 2; position: relative; overflow: visible; }
.CodeMirror-wrap pre { overflow-wrap: break-word; white-space: pre-wrap; word-break: normal; }
.CodeMirror-code pre { border-right: 30px solid transparent; width: fit-content; }
.CodeMirror-wrap .CodeMirror-code pre { border-right: none; width: auto; }
.CodeMirror-linebackground { position: absolute; left: 0px; right: 0px; top: 0px; bottom: 0px; z-index: 0; }
.CodeMirror-linewidget { position: relative; z-index: 2; overflow: auto; }
.CodeMirror-wrap .CodeMirror-scroll { overflow-x: hidden; }
.CodeMirror-measure { position: absolute; width: 100%; height: 0px; overflow: hidden; visibility: hidden; }
.CodeMirror-measure pre { position: static; }
.CodeMirror div.CodeMirror-cursor { position: absolute; visibility: hidden; border-right: none; width: 0px; }
.CodeMirror div.CodeMirror-cursor { visibility: hidden; }
.CodeMirror-focused div.CodeMirror-cursor { visibility: inherit; }
.cm-searching { background: rgba(255, 255, 0, 0.4); }
@media print {
  .CodeMirror div.CodeMirror-cursor { visibility: hidden; }
}


:root {
    --side-bar-bg-color: #fafafa;
    --control-text-color: #777;
}

@include-when-export url(https://fonts.loli.net/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext);

/* open-sans-regular - latin-ext_latin */
  /* open-sans-italic - latin-ext_latin */
    /* open-sans-700 - latin-ext_latin */
    /* open-sans-700italic - latin-ext_latin */
  html {
    font-size: 16px;
}

body {
    font-family: "Open Sans","Clear Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
    color: rgb(51, 51, 51);
    line-height: 1.6;
}

#write {
    max-width: 860px;
  	margin: 0 auto;
  	padding: 30px;
    padding-bottom: 100px;
}

@media only screen and (min-width: 1400px) {
	#write {
		max-width: 1024px;
	}
}

@media only screen and (min-width: 1800px) {
	#write {
		max-width: 1200px;
	}
}

#write > ul:first-child,
#write > ol:first-child{
    margin-top: 30px;
}

a {
    color: #4183C4;
}
h1,
h2,
h3,
h4,
h5,
h6 {
    position: relative;
    margin-top: 1rem;
    margin-bottom: 1rem;
    font-weight: bold;
    line-height: 1.4;
    cursor: text;
}
h1:hover a.anchor,
h2:hover a.anchor,
h3:hover a.anchor,
h4:hover a.anchor,
h5:hover a.anchor,
h6:hover a.anchor {
    text-decoration: none;
}
h1 tt,
h1 code {
    font-size: inherit;
}
h2 tt,
h2 code {
    font-size: inherit;
}
h3 tt,
h3 code {
    font-size: inherit;
}
h4 tt,
h4 code {
    font-size: inherit;
}
h5 tt,
h5 code {
    font-size: inherit;
}
h6 tt,
h6 code {
    font-size: inherit;
}
h1 {
    padding-bottom: .3em;
    font-size: 2.25em;
    line-height: 1.2;
    border-bottom: 1px solid #eee;
}
h2 {
   padding-bottom: .3em;
    font-size: 1.75em;
    line-height: 1.225;
    border-bottom: 1px solid #eee;
}
h3 {
    font-size: 1.5em;
    line-height: 1.43;
}
h4 {
    font-size: 1.25em;
}
h5 {
    font-size: 1em;
}
h6 {
   font-size: 1em;
    color: #777;
}
p,
blockquote,
ul,
ol,
dl,
table{
    margin: 0.8em 0;
}
li>ol,
li>ul {
    margin: 0 0;
}
hr {
    height: 2px;
    padding: 0;
    margin: 16px 0;
    background-color: #e7e7e7;
    border: 0 none;
    overflow: hidden;
    box-sizing: content-box;
}

li p.first {
    display: inline-block;
}
ul,
ol {
    padding-left: 30px;
}
ul:first-child,
ol:first-child {
    margin-top: 0;
}
ul:last-child,
ol:last-child {
    margin-bottom: 0;
}
blockquote {
    border-left: 4px solid #dfe2e5;
    padding: 0 15px;
    color: #777777;
}
blockquote blockquote {
    padding-right: 0;
}
table {
    padding: 0;
    word-break: initial;
}
table tr {
    border-top: 1px solid #dfe2e5;
    margin: 0;
    padding: 0;
}
table tr:nth-child(2n),
thead {
    background-color: #f8f8f8;
}
table tr th {
    font-weight: bold;
    border: 1px solid #dfe2e5;
    border-bottom: 0;
    margin: 0;
    padding: 6px 13px;
}
table tr td {
    border: 1px solid #dfe2e5;
    margin: 0;
    padding: 6px 13px;
}
table tr th:first-child,
table tr td:first-child {
    margin-top: 0;
}
table tr th:last-child,
table tr td:last-child {
    margin-bottom: 0;
}

.CodeMirror-lines {
    padding-left: 4px;
}

.code-tooltip {
    box-shadow: 0 1px 1px 0 rgba(0,28,36,.3);
    border-top: 1px solid #eef2f2;
}

.md-fences,
code,
tt {
    border: 1px solid #e7eaed;
    background-color: #f8f8f8;
    border-radius: 3px;
    padding: 0;
    padding: 2px 4px 0px 4px;
    font-size: 0.9em;
}

code {
    background-color: #f3f4f4;
    padding: 0 2px 0 2px;
}

.md-fences {
    margin-bottom: 15px;
    margin-top: 15px;
    padding-top: 8px;
    padding-bottom: 6px;
}


.md-task-list-item > input {
  margin-left: -1.3em;
}

@media print {
    html {
        font-size: 13px;
    }
    table,
    pre {
        page-break-inside: avoid;
    }
    pre {
        word-wrap: break-word;
    }
}

.md-fences {
	background-color: #f8f8f8;
}
#write pre.md-meta-block {
	padding: 1rem;
    font-size: 85%;
    line-height: 1.45;
    background-color: #f7f7f7;
    border: 0;
    border-radius: 3px;
    color: #777777;
    margin-top: 0 !important;
}

.mathjax-block>.code-tooltip {
	bottom: .375rem;
}

.md-mathjax-midline {
    background: #fafafa;
}

#write>h3.md-focus:before{
	left: -1.5625rem;
	top: .375rem;
}
#write>h4.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h5.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h6.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
.md-image>.md-meta {
    /*border: 1px solid #ddd;*/
    border-radius: 3px;
    padding: 2px 0px 0px 4px;
    font-size: 0.9em;
    color: inherit;
}

.md-tag {
    color: #a7a7a7;
    opacity: 1;
}

.md-toc { 
    margin-top:20px;
    padding-bottom:20px;
}

.sidebar-tabs {
    border-bottom: none;
}

#typora-quick-open {
    border: 1px solid #ddd;
    background-color: #f8f8f8;
}

#typora-quick-open-item {
    background-color: #FAFAFA;
    border-color: #FEFEFE #e5e5e5 #e5e5e5 #eee;
    border-style: solid;
    border-width: 1px;
}

/** focus mode */
.on-focus-mode blockquote {
    border-left-color: rgba(85, 85, 85, 0.12);
}

header, .context-menu, .megamenu-content, footer{
    font-family: "Segoe UI", "Arial", sans-serif;
}

.file-node-content:hover .file-node-icon,
.file-node-content:hover .file-node-open-state{
    visibility: visible;
}

.mac-seamless-mode #typora-sidebar {
    background-color: #fafafa;
    background-color: var(--side-bar-bg-color);
}

.md-lang {
    color: #b4654d;
}

.html-for-mac .context-menu {
    --item-hover-bg-color: #E6F0FE;
}

#md-notification .btn {
    border: 0;
}

.dropdown-menu .divider {
    border-color: #e5e5e5;
}

.ty-preferences .window-content {
    background-color: #fafafa;
}

.ty-preferences .nav-group-item.active {
    color: white;
    background: #999;
}


</style>
</head>
<body class="typora-export os-windows">
<div id="write" class><h1><a name="独立按键编程" class="md-header-anchor"></a><span>独立按键编程</span></h1><h2><a name="独立按键电路" class="md-header-anchor"></a><span>独立按键电路</span></h2><p><img src="/images/key.png" referrerpolicy="no-referrer" alt="key"><span>  </span></p><p><img src="/F:/blog_picture/key.png" referrerpolicy="no-referrer" alt="key"></p><ul><li><span>按键未按下，对应IO口读到高电平；按下，读到低电平</span></li><li><span>按键存在抖动，按键抖动时间约为2ms</span></li></ul><h2><a name="独立按键相关库函数" class="md-header-anchor"></a><span>独立按键相关库函数</span></h2><ul><li><span>按键初始化函数  </span></li></ul><hr><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">void Key_Init(void)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>GPIO_InitTypeDef GPIO_InitStructure;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOA|RCC_APB2Periph_GPIOB, ENABLE);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>GPIO_InitStructure.GPIO_Mode = GPIO_Mode_IPU;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>GPIO_InitStructure.GPIO_Pin = GPIO_Pin_0|GPIO_Pin_8;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>GPIO_Init(GPIOA, &amp;GPIO_InitStructure);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>GPIO_InitStructure.GPIO_Pin = GPIO_Pin_1|GPIO_Pin_2;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>GPIO_Init (GPIOB , &amp;GPIO_InitStructure);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 322px;"></div><div class="CodeMirror-gutters" style="display: none; height: 322px;"></div></div></div></pre><hr><ul><li><span>按键状态读取  </span></li></ul><hr><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>#define KEY1 GPIO_ReadInputDataBit(GPIOA , GPIO_Pin_0) &nbsp;</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>#define KEY2 GPIO_ReadInputDataBit(GPIOA , GPIO_Pin_8) &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>#define KEY3 GPIO_ReadInputDataBit(GPIOB , GPIO_Pin_1) &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>#define KEY4 GPIO_ReadInputDataBit(GPIOB , GPIO_Pin_2) &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>#define key_input KEY1 | (KEY2&lt;&lt;1) | (KEY3&lt;&lt;2) | (KEY4&lt;&lt;3) | 0xf0; &nbsp;</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 138px;"></div><div class="CodeMirror-gutters" style="display: none; height: 138px;"></div></div></div></pre><hr><h2><a name="独立按键编程-n90" class="md-header-anchor"></a><span>独立按键编程</span></h2><ol start><li><span>延时消抖</span></li></ol><hr><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">temp=read_key();</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">if(temp!=0xff)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>Delay();//按键消抖</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>temp=read_key();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>if(temp!=0xff)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>….</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 230px;"></div><div class="CodeMirror-gutters" style="display: none; height: 230px;"></div></div></div></pre><hr><p><span>缺点：  </span></p><ul><li><span>占用CPU资源</span></li><li><span>不停触发</span></li><li><span>解决不停触发：加一个松手检测</span><code>while(temp!=0xff)</code><span>  </span></li></ul><ol start="2"><li><span>状态机消抖</span><br><code>#define key_input KEY1 | (KEY2&lt;&lt;1) | (KEY3&lt;&lt;2) | (KEY4&lt;&lt;3) | 0xf0;</code><span>判断这个数就能判断按键状态    </span></li></ol><hr><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>#define key_state_0 0 //判断是否按下</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>#define key_state_1 1 //判断是否为抖动</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>#define key_state_2 2 //判断是否弹起</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>unsigned char Key_Read(void)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>static char key_state = 0;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>unsigned char key_press, key_return = 0;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>key_press = key_input;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>switch (key_state)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> &nbsp;  case key_state_0:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> &nbsp; &nbsp; &nbsp;  if(key_press!=0xff) key_state = key_state_1;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> &nbsp;  break;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> &nbsp;  case key_state_1:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> &nbsp; &nbsp; &nbsp;  if(key_press!=0xff)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> &nbsp; &nbsp; &nbsp;  {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  switch (key_press)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  case 0xfe: key_return = 1; break;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  case 0xfd: key_return = 2; break;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  case 0xfb: key_return = 3; break;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  case 0xf7: key_return = 4; break;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  key_state = key_state_2;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> &nbsp; &nbsp; &nbsp;  else </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  key_state = key_state_0;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> &nbsp; &nbsp; break;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> &nbsp; &nbsp; case key_state_2:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> &nbsp; &nbsp; &nbsp; &nbsp; if(key_press==0xff) key_state = key_state_0;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> &nbsp; &nbsp; break;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>return key_return;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 805px;"></div><div class="CodeMirror-gutters" style="display: none; height: 805px;"></div></div></div></pre><hr><ol start><li><span>每5ms调用一次</span><code>Key_Read(void)</code><span>，如果key1按下，state_0变为state_1，5ms后再次进入此函数；  </span></li></ol><ul><li><span>如果不是抖动，key_return返回对应数值，state_1变为state_2；5ms后，再次进入此函数，如果按键弹起state_2变为state_0，否则一直处于state_2。</span></li><li><span>如果是抖动，state_1变为state_0。  </span></li></ul><ol start="2"><li><p><span>只有真正按下时，key_return不为0；</span></p></li><li><p><span>三个状态，根据检测按键不同状态进行状态转换</span><br><img src="/images/key_state.png" referrerpolicy="no-referrer" alt="key_state"></p><p><img src="/F:/blog_picture/key_state.png" referrerpolicy="no-referrer" alt="key_state"></p></li><li><p><span>三行代码</span></p></li></ol><hr><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><span><span>​</span>x</span></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">unsigned&nbsp;char&nbsp;Trg;</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">unsigned&nbsp;char&nbsp;Cont;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text>​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">void Key_Read(void)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  unsigned char ReadData = (Key_Input) ^ 0xff;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  Trg = ReadData &amp; (ReadData ^ Cont);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  Cont = ReadData;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 207px;"></div><div class="CodeMirror-gutters" style="display: none; height: 207px;"></div></div></div></pre><hr><p><span>5ms调用一次</span><code>void Key_Read(void)</code><span></span><br><span>Cont:continue缩写</span><br><code>#define Key_Input KEY1 | (KEY2&lt;&lt;1) | (KEY3&lt;&lt;2) | (KEY4&lt;&lt;3) | 0xf0</code>
<span>无键按下，Key_Input=0xff;ReadData=0xff^0xff=0x00;Trg=0x00;Cont=0x00;</span>
<span>KEY1按下，  Key_Input=0xfe;ReadData=0xfe^0xff=0x01;Trg=0x01&amp;(0x01^0x00)=0x01;Cont=0x01(一次触发)</span>
<span>KEY1长按，  Key_Input=0xfe;ReadData=0xfe^0xff=0x01;Trg=0x01&amp;(0x01^0x01)=0x00;Cont=0x01</span>
<span>KEY1弹起，  KEYPORT=0xff; ReadData=0xff^0xff=0x00;Trg=0x00&amp;(0x00^0x01)=0x00;Cont=0x00  </span></p><p><span>如果按键读取一次恰好是按键抖动的时候，如果抖动时读取状态为0，则相当于按键未按下，等待下一个5ms（此时过了抖动时期，按键状态已经稳定）再次读取即可；如果抖动时读取的状态为1，就相当于按键按下，而再过5ms检测时，已经过了按键抖动的时期，不会发生状态在0与1之间不定的事情，此时，也是按键按下的状态。如果检测到状态变化就去响应的话，按键在抖动的时候，读取的状态时而为1时而为0，执行按键动作时，单片机可能认为有多次该按键按下动作。我们在执行按键动作的时候，有松手检测，即按键按下一次，算一个动作，编写按键按下时运行的函数只执行一次，如果按键抖动时，执行动作，单片机检测到（按下-松手-按下-松手-按下）等多次按键动作，那么按键按下时运行的函数被执行多次，导致逻辑错误。</span></p><ul><li><span>因此，以上动作是为了消抖。</span>
<img src="https://img-blog.csdn.net/20170814192950355?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZWxpa2FuZw==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" referrerpolicy="no-referrer" alt="key_shake"></li></ul></div>
</body>
</html>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://github.com/dawnbuji/dawnbuji.github.io/2020/07/25/Systick-timer/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="dawn_buji">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="dawn_buji's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/07/25/Systick-timer/" itemprop="url">未命名</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-07-25T16:08:05+08:00">
                2020-07-25
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
<title>Systick-timer</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
/* GitHub stylesheet for MarkdownPad (http://markdownpad.com) */
/* Author: Nicolas Hery - http://nicolashery.com */
/* Version: b13fe65ca28d2e568c6ed5d7f06581183df8f2ff */
/* Source: https://github.com/nicolahery/markdownpad-github */

/* RESET
=============================================================================*/

html, body, div, span, applet, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, a, abbr, acronym, address, big, cite, code, del, dfn, em, img, ins, kbd, q, s, samp, small, strike, strong, sub, sup, tt, var, b, u, i, center, dl, dt, dd, ol, ul, li, fieldset, form, label, legend, table, caption, tbody, tfoot, thead, tr, th, td, article, aside, canvas, details, embed, figure, figcaption, footer, header, hgroup, menu, nav, output, ruby, section, summary, time, mark, audio, video {
  margin: 0;
  padding: 0;
  border: 0;
}

/* BODY
=============================================================================*/

body {
  font-family: Helvetica, arial, freesans, clean, sans-serif;
  font-size: 14px;
  line-height: 1.6;
  color: #333;
  background-color: #fff;
  padding: 20px;
  max-width: 960px;
  margin: 0 auto;
}

body>*:first-child {
  margin-top: 0 !important;
}

body>*:last-child {
  margin-bottom: 0 !important;
}

/* BLOCKS
=============================================================================*/

p, blockquote, ul, ol, dl, table, pre {
  margin: 15px 0;
}

/* HEADERS
=============================================================================*/

h1, h2, h3, h4, h5, h6 {
  margin: 20px 0 10px;
  padding: 0;
  font-weight: bold;
  -webkit-font-smoothing: antialiased;
}

h1 tt, h1 code, h2 tt, h2 code, h3 tt, h3 code, h4 tt, h4 code, h5 tt, h5 code, h6 tt, h6 code {
  font-size: inherit;
}

h1 {
  font-size: 28px;
  color: #000;
}

h2 {
  font-size: 24px;
  border-bottom: 1px solid #ccc;
  color: #000;
}

h3 {
  font-size: 18px;
}

h4 {
  font-size: 16px;
}

h5 {
  font-size: 14px;
}

h6 {
  color: #777;
  font-size: 14px;
}

body>h2:first-child, body>h1:first-child, body>h1:first-child+h2, body>h3:first-child, body>h4:first-child, body>h5:first-child, body>h6:first-child {
  margin-top: 0;
  padding-top: 0;
}

a:first-child h1, a:first-child h2, a:first-child h3, a:first-child h4, a:first-child h5, a:first-child h6 {
  margin-top: 0;
  padding-top: 0;
}

h1+p, h2+p, h3+p, h4+p, h5+p, h6+p {
  margin-top: 10px;
}

/* LINKS
=============================================================================*/

a {
  color: #4183C4;
  text-decoration: none;
}

a:hover {
  text-decoration: underline;
}

/* LISTS
=============================================================================*/

ul, ol {
  padding-left: 30px;
}

ul li > :first-child, 
ol li > :first-child, 
ul li ul:first-of-type, 
ol li ol:first-of-type, 
ul li ol:first-of-type, 
ol li ul:first-of-type {
  margin-top: 0px;
}

ul ul, ul ol, ol ol, ol ul {
  margin-bottom: 0;
}

dl {
  padding: 0;
}

dl dt {
  font-size: 14px;
  font-weight: bold;
  font-style: italic;
  padding: 0;
  margin: 15px 0 5px;
}

dl dt:first-child {
  padding: 0;
}

dl dt>:first-child {
  margin-top: 0px;
}

dl dt>:last-child {
  margin-bottom: 0px;
}

dl dd {
  margin: 0 0 15px;
  padding: 0 15px;
}

dl dd>:first-child {
  margin-top: 0px;
}

dl dd>:last-child {
  margin-bottom: 0px;
}

/* CODE
=============================================================================*/

pre, code, tt {
  font-size: 12px;
  font-family: Consolas, "Liberation Mono", Courier, monospace;
}

code, tt {
  margin: 0 0px;
  padding: 0px 0px;
  white-space: nowrap;
  border: 1px solid #eaeaea;
  background-color: #f8f8f8;
  border-radius: 3px;
}

pre>code {
  margin: 0;
  padding: 0;
  white-space: pre;
  border: none;
  background: transparent;
}

pre {
  background-color: #f8f8f8;
  border: 1px solid #ccc;
  font-size: 13px;
  line-height: 19px;
  overflow: auto;
  padding: 6px 10px;
  border-radius: 3px;
}

pre code, pre tt {
  background-color: transparent;
  border: none;
}

kbd {
    -moz-border-bottom-colors: none;
    -moz-border-left-colors: none;
    -moz-border-right-colors: none;
    -moz-border-top-colors: none;
    background-color: #DDDDDD;
    background-image: linear-gradient(#F1F1F1, #DDDDDD);
    background-repeat: repeat-x;
    border-color: #DDDDDD #CCCCCC #CCCCCC #DDDDDD;
    border-image: none;
    border-radius: 2px 2px 2px 2px;
    border-style: solid;
    border-width: 1px;
    font-family: "Helvetica Neue",Helvetica,Arial,sans-serif;
    line-height: 10px;
    padding: 1px 4px;
}

/* QUOTES
=============================================================================*/

blockquote {
  border-left: 4px solid #DDD;
  padding: 0 15px;
  color: #777;
}

blockquote>:first-child {
  margin-top: 0px;
}

blockquote>:last-child {
  margin-bottom: 0px;
}

/* HORIZONTAL RULES
=============================================================================*/

hr {
  clear: both;
  margin: 15px 0;
  height: 0px;
  overflow: hidden;
  border: none;
  background: transparent;
  border-bottom: 4px solid #ddd;
  padding: 0;
}

/* TABLES
=============================================================================*/

table th {
  font-weight: bold;
}

table th, table td {
  border: 1px solid #ccc;
  padding: 6px 13px;
}

table tr {
  border-top: 1px solid #ccc;
  background-color: #fff;
}

table tr:nth-child(2n) {
  background-color: #f8f8f8;
}

/* IMAGES
=============================================================================*/

img {
  max-width: 100%
}
</style>
</head>
<body>
<hr>
<p>title: Systick_timer
date: 2020-07-24 18:22:50
tags: 学习</p>
<h2>categories: BlueBridgeCup</h2>
<h1>Systick和定时器的使用</h1>
<h2>Systick介绍</h2>
<p>Systick timer 24位向下计数的系统定时器<br>
主要寄存器：<br>
1. STK<em>CTRL(Systick Control and Status register) <br>
2. STK</em>LOAD(Systick reload value register)<br>
3. STK<em>VAL(Systick current value register)<br>
SysTick</em>Config(SystemCoreClock/1000);  //系统时钟设置<br>
SystemCoreClock：72 000 000 1s振荡次数 72MHz<br>
/1000为1ms振荡次数，即将Systick设为了1ms的定时器  </p>
<h2>中断处理文件stm32f10x_it.c中的  </h2>
<pre><code>void SysTick_Handler(void)
{
    TimingDelay--; //定时器1ms中断一次
}
</code></pre>

<hr>
<p>主函数文件中应用此变量TimingDelay：  </p>
<hr>
<pre><code>void Delay_Ms(u32 nTime) //ms定时器
{
    TimingDelay = nTime;
    while(TimingDelay != 0);    
}
</code></pre>

<hr>
<p>学习要点：
1. Systick介绍<br>
2. 了解SysTick<em>Config函数 <br>
3. 了解void Delay</em>Ms(u32 nTime)函数原理  </p>
<h2>介绍定时器（普通、通用）</h2>
<p>学习要点：<br>
1. 通用定时器
2. 了解NVIC相关内容<br>
资料包中TIM/TimeBase<br>
内嵌向量中断控制器：Nested Vectored Interrupt Controller(NVIC)<br>
所有ARM3芯片都有的中断向量控制器  </p>
<h2>统一管理中断向量    </h2>
<pre><code>/**
  * @brief  Configure the nested vectored interrupt controller.
  * @param  None
  * @retval None
  */
void NVIC_Configuration(void)
{
  NVIC_InitTypeDef NVIC_InitStructure;  NVIC初始化结构体
  /* Enable the TIM2 global Interrupt */
  NVIC_InitStructure.NVIC_IRQChannel = TIM2_IRQn; 中断通道
  NVIC_InitStructure.NVIC_IRQChannelPreemptionPriority = 0; 抢占优先级
  NVIC_InitStructure.NVIC_IRQChannelSubPriority = 1; 响应优先级
  NVIC_InitStructure.NVIC_IRQChannelCmd = ENABLE; 使能通道中断
  NVIC_Init(&amp;NVIC_InitStructure);
}  
</code></pre>

<hr>
<p>抢占优先级：<br>
A中断正在运行，B有中断可以抢占（打断）A的中断<br>
响应优先级：<br>
- 中断同时来，就执行优先级高的<br>
- 如果B已经中断了，则A就不会抢占它<br>
数字越小 ，优先级就越高<br>
library添加相关的文件<br>
Library/Driver/src<br>
在misc.c文件中（misc混杂的）</p>
<hr>
<pre><code>/**
  * @brief  Configures the priority grouping: pre-emption priority and subpriority.
  * @param  NVIC_PriorityGroup: specifies the priority grouping bits length. 
  *   This parameter can be one of the following values:
  *     @arg NVIC_PriorityGroup_0: 0 bits for pre-emption priority
  *                                4 bits for subpriority
  *     @arg NVIC_PriorityGroup_1: 1 bits for pre-emption priority
  *                                3 bits for subpriority
  *     @arg NVIC_PriorityGroup_2: 2 bits for pre-emption priority
  *                                2 bits for subpriority
  *     @arg NVIC_PriorityGroup_3: 3 bits for pre-emption priority
  *                                1 bits for subpriority
  *     @arg NVIC_PriorityGroup_4: 4 bits for pre-emption priority
  *                                0 bits for subpriority
  * @retval None
  */
void NVIC_PriorityGroupConfig(uint32_t NVIC_PriorityGroup) 优先级组配置
{
  /* Check the parameters */
  assert_param(IS_NVIC_PRIORITY_GROUP(NVIC_PriorityGroup));
  
  /* Set the PRIGROUP[10:8] bits according to NVIC_PriorityGroup value */
  SCB-&gt;AIRCR = AIRCR_VECTKEY_MASK | NVIC_PriorityGroup;
}  
</code></pre>

<hr>
<p>Group0: 0 bits 抢占优先级  4 bits 响应优先级 16个 0-15 高-低<br>
Group1: 1 bits 抢占优先级（2个）可配置为0/1 配置为0的可抢占配置为1的中断 3 bits 响应优先级 </p>
<h2>定时器配置： </h2>
<pre><code>TIM_TimeBaseInitTypeDef  TIM_TimeBaseStructure;  
 /* Time base configuration */   
 TIM_TimeBaseStructure.TIM_Period = 1000-1; 计数周期  
 TIM_TimeBaseStructure.TIM_Prescaler = 72-1; 预分频值 =71 72MHz预分成1M  
 TIM_TimeBaseStructure.TIM_ClockDivision = 0;时钟分频  
 TIM_TimeBaseStructure.TIM_CounterMode = TIM_CounterMode_Up;计数模式（Up or Down)  
 TIM_TimeBaseInit(TIM2, &amp;TIM_TimeBaseStructure);  
</code></pre>

<hr>
<p>72MHz/72 = 1MHz 即1us
1us * 1000 = 1ms 故设置 <code>TIM_TimeBaseStructure.TIM_Period = 1000-1;</code>  </p>
<p>定时器初始化代码：   </p>
<hr>
<pre><code>void TIM2_Init(void)
{
    TIM_TimeBaseInitTypeDef  TIM_TimeBaseStructure;    
    NVIC_InitTypeDef NVIC_InitStructure;

    /* Enable the TIM2 global Interrupt */
    NVIC_InitStructure.NVIC_IRQChannel = TIM2_IRQn;
    NVIC_InitStructure.NVIC_IRQChannelPreemptionPriority = 0;
    NVIC_InitStructure.NVIC_IRQChannelSubPriority = 1;
    NVIC_InitStructure.NVIC_IRQChannelCmd = ENABLE;

    NVIC_Init(&amp;NVIC_InitStructure);

    /* TIM2 clock enable */
    RCC_APB1PeriphClockCmd(RCC_APB1Periph_TIM2, ENABLE);

    /* Time base configuration */
    TIM_TimeBaseStructure.TIM_Period = 1000-1; //1ms
    TIM_TimeBaseStructure.TIM_Prescaler = 71;  //72 000 000 /72 = 1 000 000 Hz = 1MHz
    TIM_TimeBaseStructure.TIM_ClockDivision = 0;
    TIM_TimeBaseStructure.TIM_CounterMode = TIM_CounterMode_Up;

    TIM_TimeBaseInit(TIM2, &amp;TIM_TimeBaseStructure);

    /* TIM IT enable */
    TIM_ITConfig(TIM2, TIM_IT_Update, ENABLE); //Update更新，查询中断标志位是否有中断

    /* TIM2 enable counter */
    TIM_Cmd(TIM2, ENABLE);    

}
</code></pre>

<hr>
<p>其中，<code>NVIC_InitStructure.NVIC_IRQChannelPreemptionPriority = 0;</code> 只能设置为0，因为在<code>void NVIC_PriorityGroupConfig(uint32_t NVIC_PriorityGroup) 优先级组配置</code>时，在main函数开头我们将它配置为Group，没有抢占优先级，如果不为0可能有问题<br>
要编写的中断处理函数，有统一的名字，名字在启动文件中给出TIM2中断处理函数名。  </p>
<h2>例程，stm32f10x_it.c 资料包TIM这个文件夹下  </h2>
<pre><code>/**
  * @brief  This function handles TIM2 global interrupt request.
  * @param  None
  * @retval None
  */
void TIM2_IRQHandler(void)
{
  if (TIM_GetITStatus(TIM2, TIM_IT_Update) != RESET) 判断中断是否到来
  {
    TIM_ClearITPendingBit(TIM2, TIM_IT_Update);清除中断标志位
  }
}
</code></pre>

<hr>
<p>注意：中断处理函数，参数设置，TIM<em>IT</em>Update: TIM update Interrupt source。  </p>

</body>
</html>
<!-- This document was created with MarkdownPad, the Markdown editor for Windows (http://markdownpad.com) -->

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://github.com/dawnbuji/dawnbuji.github.io/2020/07/25/KEY/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="dawn_buji">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="dawn_buji's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/07/25/KEY/" itemprop="url">KEY</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-07-25T10:48:33+08:00">
                2020-07-25
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/BlueBridgeCup/" itemprop="url" rel="index">
                    <span itemprop="name">BlueBridgeCup</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="独立按键编程"><a href="#独立按键编程" class="headerlink" title="独立按键编程"></a>独立按键编程</h1><h2 id="独立按键电路"><a href="#独立按键电路" class="headerlink" title="独立按键电路"></a>独立按键电路</h2><p><img src="E:/Hexo/Blog/public/images/key.png" alt="key">  </p>
<ul>
<li>按键未按下，对应IO口读到高电平；按下，读到低电平</li>
<li>按键存在抖动，按键抖动时间约为2ms</li>
</ul>
<h2 id="独立按键相关库函数"><a href="#独立按键相关库函数" class="headerlink" title="独立按键相关库函数"></a>独立按键相关库函数</h2><ul>
<li>按键初始化函数  </li>
</ul>
<hr>
<pre><code>void Key_Init(void)
{
    GPIO_InitTypeDef GPIO_InitStructure;

    RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOA|RCC_APB2Periph_GPIOB, ENABLE);

    GPIO_InitStructure.GPIO_Mode = GPIO_Mode_IPU;
    GPIO_InitStructure.GPIO_Pin = GPIO_Pin_0|GPIO_Pin_8;
    GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
    GPIO_Init(GPIOA, &amp;GPIO_InitStructure);

    GPIO_InitStructure.GPIO_Pin = GPIO_Pin_1|GPIO_Pin_2;
    GPIO_Init (GPIOB , &amp;GPIO_InitStructure);
}</code></pre><hr>
<ul>
<li>按键状态读取  </li>
</ul>
<hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#define KEY1 GPIO_ReadInputDataBit(GPIOA , GPIO_Pin_0)  </span><br><span class="line">#define KEY2 GPIO_ReadInputDataBit(GPIOA , GPIO_Pin_8)  </span><br><span class="line">#define KEY3 GPIO_ReadInputDataBit(GPIOB , GPIO_Pin_1)  </span><br><span class="line">#define KEY4 GPIO_ReadInputDataBit(GPIOB , GPIO_Pin_2)  </span><br><span class="line"></span><br><span class="line">#define key_input KEY1 | (KEY2&lt;&lt;1) | (KEY3&lt;&lt;2) | (KEY4&lt;&lt;3) | 0xf0;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="独立按键编程-1"><a href="#独立按键编程-1" class="headerlink" title="独立按键编程"></a>独立按键编程</h2><ol>
<li>延时消抖</li>
</ol>
<hr>
<pre><code>temp=read_key();
if(temp!=0xff)
{
    Delay();//按键消抖
    temp=read_key();
    if(temp!=0xff)
    {
        ….
    }
}</code></pre><hr>
<p>缺点：  </p>
<ul>
<li>占用CPU资源</li>
<li>不停触发</li>
<li>解决不停触发：加一个松手检测<code>while(temp!=0xff)</code>  </li>
</ul>
<ol start="2">
<li>状态机消抖<br><code>#define key_input KEY1 | (KEY2&lt;&lt;1) | (KEY3&lt;&lt;2) | (KEY4&lt;&lt;3) | 0xf0;</code>判断这个数就能判断按键状态    </li>
</ol>
<hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">#define key_state_0 0 //判断是否按下</span><br><span class="line">#define key_state_1 1 //判断是否为抖动</span><br><span class="line">#define key_state_2 2 //判断是否弹起</span><br><span class="line"></span><br><span class="line">unsigned char Key_Read(void)</span><br><span class="line">&#123;</span><br><span class="line">	static char key_state = 0;</span><br><span class="line">	unsigned char key_press, key_return = 0;</span><br><span class="line">	key_press = key_input;</span><br><span class="line">	switch (key_state)</span><br><span class="line">	&#123;</span><br><span class="line">	    case key_state_0:</span><br><span class="line">	        if(key_press!=0xff) key_state = key_state_1;</span><br><span class="line">	    break;</span><br><span class="line">	    case key_state_1:</span><br><span class="line">	        if(key_press!=0xff)</span><br><span class="line">	        &#123;</span><br><span class="line">	            switch (key_press)</span><br><span class="line">	            &#123;</span><br><span class="line">	                case 0xfe: key_return = 1; break;</span><br><span class="line">	                case 0xfd: key_return = 2; break;</span><br><span class="line">	                case 0xfb: key_return = 3; break;</span><br><span class="line">	                case 0xf7: key_return = 4; break;</span><br><span class="line">	            &#125;</span><br><span class="line">	            key_state = key_state_2;</span><br><span class="line">	        &#125;</span><br><span class="line">	        else </span><br><span class="line">	            key_state = key_state_0;</span><br><span class="line">	     break;</span><br><span class="line">	     case key_state_2:</span><br><span class="line">	         if(key_press==0xff) key_state = key_state_0;</span><br><span class="line">	     break;</span><br><span class="line">	&#125;</span><br><span class="line">	return key_return;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<ol>
<li>每5ms调用一次<code>Key_Read(void)</code>，如果key1按下，state_0变为state_1，5ms后再次进入此函数；  </li>
</ol>
<ul>
<li>如果不是抖动，key_return返回对应数值，state_1变为state_2；5ms后，再次进入此函数，如果按键弹起state_2变为state_0，否则一直处于state_2。</li>
<li>如果是抖动，state_1变为state_0。  </li>
</ul>
<ol start="2">
<li><p>只有真正按下时，key_return不为0；</p>
</li>
<li><p>三个状态，根据检测按键不同状态进行状态转换<br><img src="/images/key_state.png" alt="key_state"></p>
<p><img src="/F:/blog_picture/key_state.png" alt="key_state"></p>
</li>
<li><p>三行代码</p>
</li>
</ol>
<hr>
<pre><code>unsigned char Trg;
unsigned char Cont;

void Key_Read(void)
{
    unsigned char ReadData = (Key_Input) ^ 0xff;
    Trg = ReadData &amp; (ReadData ^ Cont);
    Cont = ReadData;
}</code></pre><hr>
<p>5ms调用一次<code>void Key_Read(void)</code><br>Cont:continue缩写<br><code>#define Key_Input KEY1 | (KEY2&lt;&lt;1) | (KEY3&lt;&lt;2) | (KEY4&lt;&lt;3) | 0xf0</code><br>无键按下，Key_Input=0xff;ReadData=0xff^0xff=0x00;Trg=0x00;Cont=0x00;<br>KEY1按下，  Key_Input=0xfe;ReadData=0xfe^0xff=0x01;Trg=0x01&amp;(0x01^0x00)=0x01;Cont=0x01(一次触发)<br>KEY1长按，  Key_Input=0xfe;ReadData=0xfe^0xff=0x01;Trg=0x01&amp;(0x01^0x01)=0x00;Cont=0x01<br>KEY1弹起，  KEYPORT=0xff; ReadData=0xff^0xff=0x00;Trg=0x00&amp;(0x00^0x01)=0x00;Cont=0x00  </p>
<p>如果按键读取一次恰好是按键抖动的时候，如果抖动时读取状态为0，则相当于按键未按下，等待下一个5ms（此时过了抖动时期，按键状态已经稳定）再次读取即可；如果抖动时读取的状态为1，就相当于按键按下，而再过5ms检测时，已经过了按键抖动的时期，不会发生状态在0与1之间不定的事情，此时，也是按键按下的状态。如果检测到状态变化就去响应的话，按键在抖动的时候，读取的状态时而为1时而为0，执行按键动作时，单片机可能认为有多次该按键按下动作。我们在执行按键动作的时候，有松手检测，即按键按下一次，算一个动作，编写按键按下时运行的函数只执行一次，如果按键抖动时，执行动作，单片机检测到（按下-松手-按下-松手-按下）等多次按键动作，那么按键按下时运行的函数被执行多次，导致逻辑错误。</p>
<ul>
<li>因此，以上动作是为了消抖。<br><img src="https://img-blog.csdn.net/20170814192950355?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZWxpa2FuZw==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt="key_shake"></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://github.com/dawnbuji/dawnbuji.github.io/2020/07/24/Systick-timer/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="dawn_buji">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="dawn_buji's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/07/24/Systick-timer/" itemprop="url">Systick_timer</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-07-24T18:22:50+08:00">
                2020-07-24
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/BlueBridgeCup/" itemprop="url" rel="index">
                    <span itemprop="name">BlueBridgeCup</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Systick和定时器的使用"><a href="#Systick和定时器的使用" class="headerlink" title="Systick和定时器的使用"></a>Systick和定时器的使用</h1><h2 id="Systick介绍"><a href="#Systick介绍" class="headerlink" title="Systick介绍"></a>Systick介绍</h2><p>Systick timer 24位向下计数的系统定时器<br>主要寄存器：  </p>
<ol>
<li>STK_CTRL(Systick Control and Status register)   </li>
<li>STK_LOAD(Systick reload value register)  </li>
<li>STK_VAL(Systick current value register)<br>SysTick_Config(SystemCoreClock/1000);  //系统时钟设置<br>SystemCoreClock：72 000 000 1s振荡次数 72MHz<br>/1000为1ms振荡次数，即将Systick设为了1ms的定时器<br>中断处理文件stm32f10x_it.c中的  </li>
</ol>
<hr>
<pre><code>void SysTick_Handler(void)
{
    TimingDelay--; //定时器1ms中断一次
}</code></pre><hr>
<p>主函数文件中应用此变量TimingDelay：  </p>
<hr>
<pre><code>void Delay_Ms(u32 nTime) //ms定时器
{
    TimingDelay = nTime;
    while(TimingDelay != 0);    
}</code></pre><hr>
<p>学习要点：</p>
<ol>
<li>Systick介绍  </li>
<li>了解SysTick_Config函数   </li>
<li>了解void Delay_Ms(u32 nTime)函数原理  </li>
</ol>
<h2 id="介绍定时器（普通、通用）"><a href="#介绍定时器（普通、通用）" class="headerlink" title="介绍定时器（普通、通用）"></a>介绍定时器（普通、通用）</h2><p>学习要点：  </p>
<ol>
<li>通用定时器</li>
<li>了解NVIC相关内容<br>资料包中TIM/TimeBase<br>内嵌向量中断控制器：Nested Vectored Interrupt Controller(NVIC)<br>所有ARM3芯片都有的中断向量控制器<br>统一管理中断向量    </li>
</ol>
<hr>
<pre><code>/**
  * @brief  Configure the nested vectored interrupt controller.
  * @param  None
  * @retval None
  */
void NVIC_Configuration(void)
{
  NVIC_InitTypeDef NVIC_InitStructure;  NVIC初始化结构体
  /* Enable the TIM2 global Interrupt */
  NVIC_InitStructure.NVIC_IRQChannel = TIM2_IRQn; 中断通道
  NVIC_InitStructure.NVIC_IRQChannelPreemptionPriority = 0; 抢占优先级
  NVIC_InitStructure.NVIC_IRQChannelSubPriority = 1; 响应优先级
  NVIC_InitStructure.NVIC_IRQChannelCmd = ENABLE; 使能通道中断
  NVIC_Init(&amp;NVIC_InitStructure);
}  </code></pre><hr>
<p>抢占优先级：<br>A中断正在运行，B有中断可以抢占（打断）A的中断<br>响应优先级：  </p>
<ul>
<li>中断同时来，就执行优先级高的  </li>
<li>如果B已经中断了，则A就不会抢占它<br>数字越小 ，优先级就越高<br>library添加相关的文件<br>Library/Driver/src<br>在misc.c文件中（misc混杂的）</li>
</ul>
<hr>
<pre><code>/**
  * @brief  Configures the priority grouping: pre-emption priority and subpriority.
  * @param  NVIC_PriorityGroup: specifies the priority grouping bits length. 
  *   This parameter can be one of the following values:
  *     @arg NVIC_PriorityGroup_0: 0 bits for pre-emption priority
  *                                4 bits for subpriority
  *     @arg NVIC_PriorityGroup_1: 1 bits for pre-emption priority
  *                                3 bits for subpriority
  *     @arg NVIC_PriorityGroup_2: 2 bits for pre-emption priority
  *                                2 bits for subpriority
  *     @arg NVIC_PriorityGroup_3: 3 bits for pre-emption priority
  *                                1 bits for subpriority
  *     @arg NVIC_PriorityGroup_4: 4 bits for pre-emption priority
  *                                0 bits for subpriority
  * @retval None
  */
void NVIC_PriorityGroupConfig(uint32_t NVIC_PriorityGroup) 优先级组配置
{
  /* Check the parameters */
  assert_param(IS_NVIC_PRIORITY_GROUP(NVIC_PriorityGroup));

  /* Set the PRIGROUP[10:8] bits according to NVIC_PriorityGroup value */
  SCB-&gt;AIRCR = AIRCR_VECTKEY_MASK | NVIC_PriorityGroup;
}  </code></pre><hr>
<p>Group0: 0 bits 抢占优先级  4 bits 响应优先级 16个 0-15 高-低<br>Group1: 1 bits 抢占优先级（2个）可配置为0/1 配置为0的可抢占配置为1的中断 3 bits 响应优先级 </p>
<h2 id="定时器配置："><a href="#定时器配置：" class="headerlink" title="定时器配置： "></a>定时器配置： </h2><pre><code>TIM_TimeBaseInitTypeDef  TIM_TimeBaseStructure;  
 /* Time base configuration */   
 TIM_TimeBaseStructure.TIM_Period = 1000-1; 计数周期  
 TIM_TimeBaseStructure.TIM_Prescaler = 72-1; 预分频值 =71 72MHz预分成1M  
 TIM_TimeBaseStructure.TIM_ClockDivision = 0;时钟分频  
 TIM_TimeBaseStructure.TIM_CounterMode = TIM_CounterMode_Up;计数模式（Up or Down)  
 TIM_TimeBaseInit(TIM2, &amp;TIM_TimeBaseStructure);  </code></pre><hr>
<p>72MHz/72 = 1MHz 即1us<br>1us * 1000 = 1ms 故设置 <code>TIM_TimeBaseStructure.TIM_Period = 1000-1;</code>  </p>
<p>定时器初始化代码：   </p>
<hr>
<pre><code>void TIM2_Init(void)
{
    TIM_TimeBaseInitTypeDef  TIM_TimeBaseStructure;    
    NVIC_InitTypeDef NVIC_InitStructure;

    /* Enable the TIM2 global Interrupt */
    NVIC_InitStructure.NVIC_IRQChannel = TIM2_IRQn;
    NVIC_InitStructure.NVIC_IRQChannelPreemptionPriority = 0;
    NVIC_InitStructure.NVIC_IRQChannelSubPriority = 1;
    NVIC_InitStructure.NVIC_IRQChannelCmd = ENABLE;

    NVIC_Init(&amp;NVIC_InitStructure);

    /* TIM2 clock enable */
    RCC_APB1PeriphClockCmd(RCC_APB1Periph_TIM2, ENABLE);

    /* Time base configuration */
    TIM_TimeBaseStructure.TIM_Period = 1000-1; //1ms
    TIM_TimeBaseStructure.TIM_Prescaler = 71;  //72 000 000 /72 = 1 000 000 Hz = 1MHz
    TIM_TimeBaseStructure.TIM_ClockDivision = 0;
    TIM_TimeBaseStructure.TIM_CounterMode = TIM_CounterMode_Up;

    TIM_TimeBaseInit(TIM2, &amp;TIM_TimeBaseStructure);

    /* TIM IT enable */
    TIM_ITConfig(TIM2, TIM_IT_Update, ENABLE); //Update更新，查询中断标志位是否有中断

    /* TIM2 enable counter */
    TIM_Cmd(TIM2, ENABLE);    

}</code></pre><hr>
<p>其中，<code>NVIC_InitStructure.NVIC_IRQChannelPreemptionPriority = 0;</code> 只能设置为0，因为在<code>void NVIC_PriorityGroupConfig(uint32_t NVIC_PriorityGroup) 优先级组配置</code>时，在main函数开头我们将它配置为Group，没有抢占优先级，如果不为0可能有问题<br>要编写的中断处理函数，有统一的名字，名字在启动文件中给出TIM2中断处理函数名。  </p>
<h2 id="例程，stm32f10x-it-c-资料包TIM这个文件夹下"><a href="#例程，stm32f10x-it-c-资料包TIM这个文件夹下" class="headerlink" title="例程，stm32f10x_it.c 资料包TIM这个文件夹下  "></a>例程，stm32f10x_it.c 资料包TIM这个文件夹下  </h2><pre><code>/**
  * @brief  This function handles TIM2 global interrupt request.
  * @param  None
  * @retval None
  */
void TIM2_IRQHandler(void)
{
  if (TIM_GetITStatus(TIM2, TIM_IT_Update) != RESET) 判断中断是否到来
  {
    TIM_ClearITPendingBit(TIM2, TIM_IT_Update);清除中断标志位
  }
}</code></pre><hr>
<p>注意：中断处理函数，参数设置，TIM_IT_Update: TIM update Interrupt source。  </p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://github.com/dawnbuji/dawnbuji.github.io/2020/07/24/Beep/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="dawn_buji">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="dawn_buji's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/07/24/Beep/" itemprop="url">Beep</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-07-24T17:12:17+08:00">
                2020-07-24
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/BlueBridgeCup/" itemprop="url" rel="index">
                    <span itemprop="name">BlueBridgeCup</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="端口重映射及蜂鸣器操作方法"><a href="#端口重映射及蜂鸣器操作方法" class="headerlink" title="端口重映射及蜂鸣器操作方法"></a>端口重映射及蜂鸣器操作方法</h1><h2 id="端口重映射"><a href="#端口重映射" class="headerlink" title="端口重映射"></a>端口重映射</h2><p>蜂鸣器原理图如下：<br><img src="/images/buzzer.png" alt="buzzer"><br>三极管作用：放大电流<br>10k电阻作用：限流<br>二极管作用：与蜂鸣器构成放电回路，防止烧坏三极管<br>为什么要端口重映射？<br>因为蜂鸣器的IO口PB4原本的功能是JTAG调试，而非普通IO口<br>重映射方法：  </p>
<ol>
<li>开启AFIO复用时钟RCC_APB2Periph_AFIO(所有重映射功能都在AFIO这个时钟管理下面)<br><code>RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOB|RCC_APB2Periph_AFIO, ENABLE);</code>  </li>
<li>调用GPIO_PinRemapConfig配置管脚重映射<br><code>GPIO_PinRemapConfig(GPIO_Remap_SWJ_NoJTRST, ENABLE);</code>  </li>
<li>注意映射后端口的功能（本实验中重映射后作为普通IO口使用）<br>库函数中有例程可以参考GPIO/JTAG_Remap</li>
</ol>
<h2 id="蜂鸣器控制"><a href="#蜂鸣器控制" class="headerlink" title="蜂鸣器控制"></a>蜂鸣器控制</h2><p><img src="/images/beep_control.png" alt="beep_control">  </p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://github.com/dawnbuji/dawnbuji.github.io/2020/07/23/RCC-LED/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="dawn_buji">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="dawn_buji's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/07/23/RCC-LED/" itemprop="url">RCC_LED</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-07-23T11:10:24+08:00">
                2020-07-23
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/BlueBridgeCup/" itemprop="url" rel="index">
                    <span itemprop="name">BlueBridgeCup</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Stm32时钟简介"><a href="#Stm32时钟简介" class="headerlink" title="Stm32时钟简介"></a>Stm32时钟简介</h1><ul>
<li>RCC 复位和时钟总线</li>
<li>AHB 系统总线（高阶外设总线）</li>
</ul>
<ol>
<li>APB1 定时器、串口、低速</li>
<li>APB2 GPIO、高速<br>HSE:高速外部时钟<br>HSI:高速内部时钟<br>LSI:低速内部时钟<br>LSE:低速外部时钟</li>
<li>了解APB1(低速)和APB2(高速)外设</li>
<li>学会看STM32时钟框图</li>
<li>学会用库函数开启外设时钟</li>
<li>学会STM32 IO配置方法与应用场合  </li>
</ol>
<h2 id="定义初始化结构体"><a href="#定义初始化结构体" class="headerlink" title="定义初始化结构体"></a>定义初始化结构体</h2><p><code>GPIO_InitTypeDef GPIO_InitStructure</code><br>定义结构体变量类型 结构体名称<br><code>GPIO_Mode</code><br>枚举变量构成<br><a href="https://www.cnblogs.com/cumtchw/" target="_blank" rel="noopener">GPIO的八种工作模式</a>  </p>
<ol>
<li><code>GPIO_Mode_AIN</code><br>模拟输入 ADC采样  </li>
<li><code>GPIO_Mode_IPD</code><br>下拉输入 IO口不接的话，默认为低电平  </li>
<li><code>GPIO_Mode_IPU</code><br>上拉输入 IO口不接的话，默认为高电平  </li>
<li><code>GPIO_Mode_IN_FLOATING</code><br>浮空输入 IO口不接的话，状态不定，呈高阻态    </li>
<li><code>GPIO_Mode_Out_OD</code><br>开漏输出，IO输出0接GND，IO输出1，悬空，需要外接上拉电阻，才能实现输出高电平。当输出为1时，IO口的状态由上拉电阻拉高电平，但由于是开漏输出模式，这样IO口也就可以由外部电路改变为低电平或不变。可以读IO输入电平变化，实现C51的IO双向功能，适合于做电流型的驱动,其吸收电流的能力相对强(一般20ma以内)。    </li>
<li><code>GPIO_Mode_Out_PP</code><br>推挽输出，可以输出高电平、低电平（提高电路负载能力，开关速度）  </li>
<li><code>GPIO_Mode_AF_OD</code><br>复用开漏输出，片内外设功能 </li>
<li><code>GPIO_Mode_AF_PP</code><br>复用推挽输出，片内外设功能  </li>
</ol>
<h2 id="IO口配置步骤"><a href="#IO口配置步骤" class="headerlink" title="IO口配置步骤"></a>IO口配置步骤</h2><ol>
<li><p>定义一个IO口初始化结构体  <code>GPIO_InitTypeDef GPIO_InitStructure;</code>  </p>
</li>
<li><p>使能相应的IO口时钟  <code>RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOC, ENABLE);</code></p>
</li>
<li><p>结构体赋值 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">GPIO_InitStructure.GPIO_Pin = GPIO_Pin_8;  </span><br><span class="line">GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;  </span><br><span class="line">GPIO_InitStructure.GPIO_Mode = GPIO_Mode_Out_PP;</span><br></pre></td></tr></table></figure>
</li>
<li><p>调用初始化函数 <code>GPIO_Init(GPIOC, &amp;GPIO_InitStructure);</code></p>
</li>
</ol>
<h1 id="LED锁存器控制"><a href="#LED锁存器控制" class="headerlink" title="LED锁存器控制"></a>LED锁存器控制</h1><ul>
<li>D0-D7对应的GPIO引脚为PC8-PC15</li>
<li>LE锁存器控制引脚为PD2</li>
</ul>
<h2 id="LED为共阳模式"><a href="#LED为共阳模式" class="headerlink" title="LED为共阳模式"></a>LED为共阳模式</h2><ul>
<li><code>GPIO_ResetBits(GPIOC,led_ctrl&lt;&lt;8);</code> 把对应引脚清0，不影响其他位<br>例如，将led_ctrl赋值为0x01，则GPIOC的第八个引脚被赋值为0。  </li>
<li><code>GPIO_SetBits(GPIOD,GPIO_Pin_2);</code> 把对应的引脚置1，不影响其他位</li>
<li>编写LED控制代码的方法<br>例如，使LED亮，设置该LED对应的GPIO口的状态，再打开锁存器使PC口的状态做出的改变输出到LED口。之后，关闭锁存器使该状态保持，并且保持的状态不会改变。<pre><code>GPIO_ResetBits(GPIOC, led_ctrl&lt;&lt;8);
  GPIO_SetBits(GPIOD, GPIO_Pin_2);
  GPIO_ResetBits(GPIOD, GPIO_Pin_2);</code></pre></li>
</ul>
<p>注：</p>
<ol>
<li>View/Watch windows/watch1/2 可以在仿真调试时看到变量状态<br>调试时能看的变量：全局变量与未被优化的局部变量</li>
<li>开启代码提示 configuration/Text Completion</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://github.com/dawnbuji/dawnbuji.github.io/2020/07/22/Log-Four/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="dawn_buji">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="dawn_buji's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/07/22/Log-Four/" itemprop="url">Log-Four</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-07-22T22:20:25+08:00">
                2020-07-22
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/个人日记/" itemprop="url" rel="index">
                    <span itemprop="name">个人日记</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <script src=/js/crypto-js.js></script>
<script>
function doDecrypt (pwd, onError) {
	console.log('in doDecrypt');
	const txt = document.getElementById('enc_content').innerHTML;
	let plantext;
	try {
		const bytes = CryptoJS.AES.decrypt(txt, pwd);
		var plaintext = bytes.toString(CryptoJS.enc.Utf8);
	} catch(err) {
		if(onError) {
			onError(err);
		}
		return;
	}
	document.getElementById('enc_content').innerHTML = plaintext;
	document.getElementById('enc_content').style.display = 'block';
	document.getElementById('enc_passwd').style.display = 'none';
	if(typeof MathJax !== 'undefined') {
		MathJax.Hub.Queue(
			['resetEquationNumbers', MathJax.InputJax.TeX],
			['PreProcess', MathJax.Hub],
			['Reprocess', MathJax.Hub]
		);
	}
}
</script>
<div id="enc_content" style="display:none">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</div>
<div id="enc_passwd"> <input id="enc_pwd_input" type="password" style="border-radius: 5px;border-style: groove;height: 30px;width: 50%;cursor: auto;font-size: 102%;color: currentColor;outline: none;text-overflow: initial;padding-left: 5px;" onkeydown="if (event.keyCode == 13) { decrypt(); return false;}"> <input type="submit" value="解&nbsp;密" onclick="decrypt()" style="width: 58px;height: 34px;border-radius: 5px;background-color: white;border-style: solid;color: currentColor;"><div id="enc_error" style="display: inline-block;color: #d84527;margin-left: 10px"></div>
<script>
var onError = function(error) {
	document.getElementById("enc_error").innerHTML = "password error!"
};
function decrypt() {
var passwd = document.getElementById("enc_pwd_input").value;
console.log(passwd);
doDecrypt(passwd, onError);
}
</script>
</div>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://github.com/dawnbuji/dawnbuji.github.io/2020/07/21/Log-Three/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="dawn_buji">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="dawn_buji's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/07/21/Log-Three/" itemprop="url">Log_Three</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-07-21T22:14:27+08:00">
                2020-07-21
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/个人日记/" itemprop="url" rel="index">
                    <span itemprop="name">个人日记</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <script src=/js/crypto-js.js></script>
<script>
function doDecrypt (pwd, onError) {
	console.log('in doDecrypt');
	const txt = document.getElementById('enc_content').innerHTML;
	let plantext;
	try {
		const bytes = CryptoJS.AES.decrypt(txt, pwd);
		var plaintext = bytes.toString(CryptoJS.enc.Utf8);
	} catch(err) {
		if(onError) {
			onError(err);
		}
		return;
	}
	document.getElementById('enc_content').innerHTML = plaintext;
	document.getElementById('enc_content').style.display = 'block';
	document.getElementById('enc_passwd').style.display = 'none';
	if(typeof MathJax !== 'undefined') {
		MathJax.Hub.Queue(
			['resetEquationNumbers', MathJax.InputJax.TeX],
			['PreProcess', MathJax.Hub],
			['Reprocess', MathJax.Hub]
		);
	}
}
</script>
<div id="enc_content" style="display:none">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</div>
<div id="enc_passwd"> <input id="enc_pwd_input" type="password" style="border-radius: 5px;border-style: groove;height: 30px;width: 50%;cursor: auto;font-size: 102%;color: currentColor;outline: none;text-overflow: initial;padding-left: 5px;" onkeydown="if (event.keyCode == 13) { decrypt(); return false;}"> <input type="submit" value="解&nbsp;密" onclick="decrypt()" style="width: 58px;height: 34px;border-radius: 5px;background-color: white;border-style: solid;color: currentColor;"><div id="enc_error" style="display: inline-block;color: #d84527;margin-left: 10px"></div>
<script>
var onError = function(error) {
	document.getElementById("enc_error").innerHTML = "password error!"
};
function decrypt() {
var passwd = document.getElementById("enc_pwd_input").value;
console.log(passwd);
doDecrypt(passwd, onError);
}
</script>
</div>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://github.com/dawnbuji/dawnbuji.github.io/2020/07/19/Log-Two/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="dawn_buji">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="dawn_buji's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/07/19/Log-Two/" itemprop="url">Log Two</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-07-19T20:07:04+08:00">
                2020-07-19
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/个人日记/" itemprop="url" rel="index">
                    <span itemprop="name">个人日记</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <script src=/js/crypto-js.js></script>
<script>
function doDecrypt (pwd, onError) {
	console.log('in doDecrypt');
	const txt = document.getElementById('enc_content').innerHTML;
	let plantext;
	try {
		const bytes = CryptoJS.AES.decrypt(txt, pwd);
		var plaintext = bytes.toString(CryptoJS.enc.Utf8);
	} catch(err) {
		if(onError) {
			onError(err);
		}
		return;
	}
	document.getElementById('enc_content').innerHTML = plaintext;
	document.getElementById('enc_content').style.display = 'block';
	document.getElementById('enc_passwd').style.display = 'none';
	if(typeof MathJax !== 'undefined') {
		MathJax.Hub.Queue(
			['resetEquationNumbers', MathJax.InputJax.TeX],
			['PreProcess', MathJax.Hub],
			['Reprocess', MathJax.Hub]
		);
	}
}
</script>
<div id="enc_content" style="display:none">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</div>
<div id="enc_passwd"> <input id="enc_pwd_input" type="password" style="border-radius: 5px;border-style: groove;height: 30px;width: 50%;cursor: auto;font-size: 102%;color: currentColor;outline: none;text-overflow: initial;padding-left: 5px;" onkeydown="if (event.keyCode == 13) { decrypt(); return false;}"> <input type="submit" value="解&nbsp;密" onclick="decrypt()" style="width: 58px;height: 34px;border-radius: 5px;background-color: white;border-style: solid;color: currentColor;"><div id="enc_error" style="display: inline-block;color: #d84527;margin-left: 10px"></div>
<script>
var onError = function(error) {
	document.getElementById("enc_error").innerHTML = "password error!"
};
function decrypt() {
var passwd = document.getElementById("enc_pwd_input").value;
console.log(passwd);
doDecrypt(passwd, onError);
}
</script>
</div>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://github.com/dawnbuji/dawnbuji.github.io/2020/07/15/OneDay-test/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="dawn_buji">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="dawn_buji's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/07/15/OneDay-test/" itemprop="url">OneDay'test</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-07-15T16:24:22+08:00">
                2020-07-15
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/个人日记/" itemprop="url" rel="index">
                    <span itemprop="name">个人日记</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <script src=/js/crypto-js.js></script>
<script>
function doDecrypt (pwd, onError) {
	console.log('in doDecrypt');
	const txt = document.getElementById('enc_content').innerHTML;
	let plantext;
	try {
		const bytes = CryptoJS.AES.decrypt(txt, pwd);
		var plaintext = bytes.toString(CryptoJS.enc.Utf8);
	} catch(err) {
		if(onError) {
			onError(err);
		}
		return;
	}
	document.getElementById('enc_content').innerHTML = plaintext;
	document.getElementById('enc_content').style.display = 'block';
	document.getElementById('enc_passwd').style.display = 'none';
	if(typeof MathJax !== 'undefined') {
		MathJax.Hub.Queue(
			['resetEquationNumbers', MathJax.InputJax.TeX],
			['PreProcess', MathJax.Hub],
			['Reprocess', MathJax.Hub]
		);
	}
}
</script>
<div id="enc_content" style="display:none">U2FsdGVkX1+9nQp8adJ9qtQDOEkaw6eK1aJVdfV5V6OkAoGq+rv5QpmuUYHCOJLsVgtmYgrdvx9AjCOB4+6vEcXD9eikOT5EwEEWXRkn4Z1x3nsKHsYMoyUhj5bCFQpCGFAaJG0QuLZazag1QWnwghuWDgIemmKzU5Lr1UAs0ZBGwbIoXDEanOmRsycW0rDhILUUDqdyH3dGQ0XWkmWt16EposRjN1zg9PfmAovGtL56245+Pq86yfTZdckEU8JSjoQY54kqS0Xh4kxiO8OyJO5ghsvmXs9Ktf/w9/ykxh7YDSlZ70Er4gscL0QJyu5HkY1h2SHT0EXDsy4nqG+bJQ8PJ1Ebpm3gjsTYm5A/Z63NHYBL696DeWfO8fOlIpyErKYPy9wFH8kFfD4m7zgZTHImN1n0+HO5SP/TtHTC1OFEmk1vpYJFPiP2EVbVza1i57CwkCro1yZA/AFIAD9ZxeAyarwvmbNxE5jtyDt4s5Q9j4TfG7X2E+ppM4DmVrKveepycaPTNO6nwBjNJzCSHQgOGfZsXR5zYDZZKinsZfZ/oHBt6QlAATTC3msTXKixN6g0m987J9pbC3d3DlF1UiX3YNRgyN4uWkoN3/NiNRxQcy+TljvK9Zv4FoMP4k/pRQIYZ/fGkUj75zcxeUXVy9Zv4jTxrvaqjQRg7NDyPPAHxjbpI8+JnfoD4YS2ae0/SMi88CLxdxPvQiChKB/67ZWXyuMgpH2U3l1ohBHOxkgnp8xmCq0oKsBK3WYUppGLhB8o/gB27HizJCodY1+t+XmFfmuy+Fo5iJRYq1tm2LfEr1Ew5f/rE3tw9yee/j8EOPKpxGWn74rW4A8bOlrliDaQBFfVu4ZAz3GkHh/BniYPGpqU2mDsBFEcuDvNRCI7PToyWWheZNgweAIiimjCw6sdsNSpIfOif5Dsh6FnGfV5oItmsgBpeBtau0iAVxetfheCoIDHAOR5HLPhWfa8oYEsSqhcX0J+QYLwNoTrWxYD0mEkghrhDQOEDuPEIU/O+BQbLWECFq+sW4QtGmajTz2TmcIkISt76diKKVobUlwhN5/wLxcQrhnNRBQ0fXcDn5A+8Yo6XbR7WWRBsxPxTcqMYuIdvAniVJJgtH7lJGVota4olmmUMhdrYnvbPT98SMMUe0djTkfRSJf642YCi8nQ1SJ1Lw+hXUr7+Yy1bUMWD98Fue+NPLMvANm3EyoDc18HXZAvMyEaxl7wNXkwsFC0qwcv6UH0SPjLdNZweZ/p0jSo/L/gJaD4bUn6j2KKVptHW3ZHaAVQlHxFLAGgQ+Ca82gxi7zUfhj0bKxMpvPYf1KoSCiHk3C38EUIaEyAXgjRt3yS+7kr6Atvknz4zTgwSVNe9xfDrnyJhQdNR2PPOMeIpSben20TNo90U0XxVCWIRvlPkrd/LdR0sqASyA==</div>
<div id="enc_passwd"> <input id="enc_pwd_input" type="password" style="border-radius: 5px;border-style: groove;height: 30px;width: 50%;cursor: auto;font-size: 102%;color: currentColor;outline: none;text-overflow: initial;padding-left: 5px;" onkeydown="if (event.keyCode == 13) { decrypt(); return false;}"> <input type="submit" value="解&nbsp;密" onclick="decrypt()" style="width: 58px;height: 34px;border-radius: 5px;background-color: white;border-style: solid;color: currentColor;"><div id="enc_error" style="display: inline-block;color: #d84527;margin-left: 10px"></div>
<script>
var onError = function(error) {
	document.getElementById("enc_error").innerHTML = "password error!"
};
function decrypt() {
var passwd = document.getElementById("enc_pwd_input").value;
console.log(passwd);
doDecrypt(passwd, onError);
}
</script>
</div>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/avatar.jpg"
                alt="dawn_buji" />
            
              <p class="site-author-name" itemprop="name">dawn_buji</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">27</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">5</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">6</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">dawn_buji</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
